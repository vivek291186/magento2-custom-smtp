<?php
$jsonHelper = $this->helper('Magento\Framework\Json\Helper\Data');
?>
<?php echo $block->getBlockBtnHtml() ?>

<script>
    require([
        'jquery',
        'Magento_Ui/js/modal/alert'
    ], function ($, alert) {
        window.EmizentechCustomSmtpDebugTest = function()
        {
            var poastData = {
                    form_key: FORM_KEY,
                    host:$('#customsmtp_emizentechcustomsmtp_host').val(),
                    uname:$('#customsmtp_emizentechcustomsmtp_username').val(),
                    pass:$('#customsmtp_emizentechcustomsmtp_password').val(),
                    auth: $('#customsmtp_emizentechcustomsmtp_auth').val(),
                    ssltype:$('#customsmtp_emizentechcustomsmtp_ssltype').val(),
                    port:$('#customsmtp_emizentechcustomsmtp_port').val(),
                    email:$('#customsmtp_emizentechcustomsmtp_email').val()
                };
            $.ajax({
                url: '<?php echo $block->getTestMailUrl() ?>',
                dataType: 'html',
                type: 'post',
                data: poastData,
                showLoader: true
            }).done(function(response) {
                alert({
                    title:'Response',
                    content:response
                });
            });
        }
    });
</script>
